```{r setup, include=FALSE}
library(jsonlite)
mix_align_report <- fromJSON("results_mix_combined/combined_1_2.align.report.json")
mix_assemble_report <- fromJSON("results_mix_combined/combined_1_2.assemble.report.json")
mix_qc <- fromJSON("results_mix_combined/combined_1_2.qc.json")
View(mix_align_report)
knitr::opts_chunk$set(
echo = F,
message = F
)
setwd("/home/brunotrevizan/dev/IPPPP/B_T_tools_article/Results")
library(ggplot2)
View(mix_assemble_report)
View(mix_align_report)
mix_align_long_report <- mix_align_report %>%
unnest(notAlignedReasons)
mix_align_long_report <- mix_align_report |>
unnest(notAlignedReasons)
ggplot(data.frame(notAlignedReasons = unlist(mix_align_report$notAlignedReasons)),
aes(x = notAlignedReasons)) +
geom_bar(fill = "red") +
theme_minimal()
View(mix_align_report)
library(dplyr)
mix_align_report_long <- mix_align_report %>%
unnest_wider(notAlignedReasons) %>%
pivot_longer(cols = everything(),
names_to = "Reason",
values_to = "Count")
library(jsonlite)
library(ggplot2)
library(tidyr)
library(dplyr)
mix_align_report_long <- mix_align_report %>%
unnest_wider(notAlignedReasons) %>%
pivot_longer(cols = everything(),
names_to = "Reason",
values_to = "Count")
mix_align_report_long <- tibble(notAlignedReasons = list(mix_align_report$notAlignedReasons)) %>%
unnest_wider(notAlignedReasons) %>%
pivot_longer(cols = everything(),
names_to = "Reason",
values_to = "Count")
ggplot(mix_align_report_long, aes(x = reorder(Reason, -Count), y = Count)) +
geom_col(fill = "red") +
theme_minimal() +
theme(axis.text.x = element_text(angle = 45, hjust = 1))
View(mix_assemble_report)
mix_assemble_report_dropped <- mix_assemble_report %>%
select(starts_with("readsDropped")) %>%
pivot_longer(cols = everything(),
names_to = "Reason",
values_to = "Count")
mix_assemble_report_dropped <- tibblemix_assemble_report) %>%
mix_assemble_report_dropped <- tibble(mix_assemble_report) %>%
select(starts_with("readsDropped")) %>%
pivot_longer(cols = everything(),
names_to = "Reason",
values_to = "Count")
tibble(mix_assemble_report)
mix_assemble_report_dropped <- tibble(mix_assemble_report)
View(mix_assemble_report_dropped)
mix_assemble_report_dropped <- tibble(mix_assemble_report) %>%
select(starts_with("readsDropped")) %>%
pivot_longer(cols = everything(),
names_to = "Reason",
values_to = "Count")
View(mix_assemble_report_dropped)
View(mix_assemble_report)
View(mix_align_report)
View(mix_align_report_long)
View(mix_assemble_report_dropped)
View(mix_qc)
mix_assemble_report_dropped <- as_tibble(as.data.frame(mix_assemble_report)) %>%
select(starts_with("readsDropped")) %>%
pivot_longer(cols = everything(),
names_to = "Reason",
values_to = "Count")
mix_assemble_report_df <- enframe(mix_assemble_report, name = "Reason", value = "Count") %>%
select(starts_with("readsDropped")) %>%
pivot_longer(cols = everything(),
names_to = "Reason",
values_to = "Count")
mix_assemble_report_dropped <- as_tibble(as.data.frame(mix_assemble_report)) %>%
select(starts_with("readsDropped")) %>%
pivot_longer(cols = everything(),
names_to = "Reason",
values_to = "Count")
mix_assemble_report_df <- enframe(mix_assemble_report, name = "Reason", value = "Count")
# 1️⃣ Transformar lista nomeada em tibble
mix_assemble_report_df <- enframe(mix_assemble_report, name = "Reason", value = "Count")
mix_assemble_report_dropped <- tibble(mix_assemble_report) %>%
select(starts_with("readsDropped")) %>%
pivot_longer(cols = everything(),
names_to = "Reason",
values_to = "Count")
View(mix_align_report)
View(mix_assemble_report)
View(mix_assemble_report_dropped)
mix_assemble_report
mix_assemble_report_dropped <- as_tibble_row(mix_assemble_report) %>%
select(starts_with("readsDropped")) %>%
pivot_longer(cols = everything(),
names_to = "Reason",
values_to = "Count")
install.packages("tidyverse")
library(jsonlite)
library(ggplot2)
library(tidyr)
library(dplyr)
library(tidy)
library(jsonlite)
library(ggplot2)
library(tidyr)
library(dplyr)
library(tidyverse)
install.packages("tidyverse")
install.packages("tidyverse")
library(jsonlite)
library(ggplot2)
library(tidyr)
library(dplyr)
library(tidyverse)
library(jsonlite)
library(ggplot2)
library(tidyr)
library(dplyr)
library(tidyverse)
install.packages("tidyverse")
library(jsonlite)
library(ggplot2)
library(tidyr)
library(dplyr)
library(tidyverse)
mix_assemble_report_dropped <- as_tibble_row(mix_assemble_report) %>%
select(starts_with("readsDropped")) %>%
pivot_longer(cols = everything(),
names_to = "Reason",
values_to = "Count")
mix_assemble_report_dropped <- enframe(mix_assemble_report, name = "Reason", value = "Count") %>%
filter(str_starts(Reason, "readsDropped")) %>%
unnest(Count)
ggplot(mix_assemble_report_dropped,
aes(x=reorder(Reason, -Count),
y = Count)) +
geom_col(fill="red") +
theme_minimal() +
theme(axis.text.x = element_text(angle = 45, hjust = 1)) +
labs(
title = "Leituras descartadas",
x = "Motivo",
y = "Quantidade"
)
View(mix_qc)
colnames(mix_qc)
mix_qc$step
mix_qc$check
str(mix_qc)
library(gt)
install.packages("gt")
knitr::opts_chunk$set(
echo = F,
message = F
)
setwd("/home/brunotrevizan/dev/IPPPP/B_T_tools_article/Results")
qc_table %>%
gt() %>%
data_color(
columns = status,
colors = scales::col_factor(c("tomato", "steelblue"), levels = c("ALERT", "OK"))
) %>%
tab_header(title = "Resumo do Quality Control")
library(jsonlite)
library(ggplot2)
library(tidyr)
library(dplyr)
library(tidyverse)
library(gt)
qc_table %>%
gt() %>%
data_color(
columns = status,
colors = scales::col_factor(c("tomato", "steelblue"), levels = c("ALERT", "OK"))
) %>%
tab_header(title = "Resumo do Quality Control")
qc_table <- mix_qc %>%
unnest_wider(payload, names_sep = "_") %>%  # expande as colunas de payload
select(step, status, printedValue = payload_printedValue, value = payload_value)
qc_table %>%
gt() %>%
data_color(
columns = status,
colors = scales::col_factor(c("tomato", "steelblue"), levels = c("ALERT", "OK"))
) %>%
tab_header(title = "Resumo do Quality Control")
qc_table <- mix_qc %>%
unnest_wider(check, names_sep = "_") %>%
unnest_wider(payload, names_sep = "_") %>%
select(
step,
status,
type = check_type,
label = check_label,
printedValue = payload_printedValue,
value = payload_value
)
qc_table %>%
gt() %>%
data_color(
columns = status,
fn = scales::col_factor(
palette = c("tomato", "steelblue"),
levels = c("ALERT", "OK")
)
) %>%
tab_header(title = "Resumo do Quality Control") %>%
tab_spanner_delim(delim = "_") %>%
fmt_percent(columns = value, decimals = 1)
setwd("/home/brunotrevizan/dev/pesquisaOperacional/A1/TurismoCWB")
library(dplyr)
library(ggplot2)
library(ggcorrplot)
data <- read.csv("TurismoCWB(1).csv")
# Plots:
# Quantidade de categorias
# Tratar a coluna extra
data_clean <- data %>%
select(-X)
# quantidade de valores ausentes
nan_total <- colSums(
is.na(data_clean) |
data_clean == "none" |
data_clean == "Nan" |
data_clean == "nan"
)
nan_total_df <- data.frame(
column = names(nan_total),
missing_count = nan_total
)
plot_nan <- ggplot(data = nan_total_df, aes(x=column, y=missing_count, fill = column))+
geom_bar(stat="identity")+
scale_fill_brewer(palette = "Set1")+
theme_minimal() +
theme(
legend.position = "none",
axis.text.x = element_text(angle = 60, face = "italic", hjust = 1, vjust = 1)
) +
labs(x = "Coluna", y = "Quantidade de valores ausentes por coluna",
title = "Valores ausentes por coluna")
ggsave(plot_nan, filename = "plot_nan.svg", device = "svg", height = 10, width = 10)
# matriz de correlação entre variáveis
numeric_data <- data_clean[, sapply(data_clean, is.numeric)]
corr <- round(cor(numeric_data), 1)
matriz_cor <- ggcorrplot(corr, hc.order = T, outline.color = "white")
ggsave("matriz_cor.svg", plot = matriz_cor, device = "svg", height = 10, width = 10)
# Gráfico de categorias
barplot(data_clean$categoria)
barplot(data_clean$categoria)
# Gráfico de categorias
barplot(count((data_clean$categoria)))
plot4 <- ggplot(df, aes(x = longitude, y = latitude)) +
geom_point(aes(color = categoria, size = popularidade), alpha = 0.8) +
scale_size_continuous(range = c(3, 10)) + # Controla o tamanho min/max dos pontos
labs(
title = "Mapa Geoespacial dos Pontos Turísticos",
x = "Longitude",
y = "Latitude",
color = "Categoria",
size = "Popularidade"
) +
theme_minimal() +
theme(legend.position = "right")
plot4 <- ggplot(data_clean, aes(x = longitude, y = latitude)) +
geom_point(aes(color = categoria, size = popularidade), alpha = 0.8) +
scale_size_continuous(range = c(3, 10)) + # Controla o tamanho min/max dos pontos
labs(
title = "Mapa Geoespacial dos Pontos Turísticos",
x = "Longitude",
y = "Latitude",
color = "Categoria",
size = "Popularidade"
) +
theme_minimal() +
theme(legend.position = "right")
ggsave("mapa_geoespacial_R.png", plot = plot4, width = 12, height = 8)
library(forcats)
bar_cat <- ggplot(df, aes(x = fct_infreq(categoria), fill = categoria)) +
geom_bar(show.legend = FALSE) +
labs(
title = "Contagem de Pontos Turísticos por Categoria",
x = "Categoria",
y = "Contagem"
) +
theme_minimal() +
theme(axis.text.x = element_text(angle = 45, hjust = 1))
bar_cat <- ggplot(data_clean, aes(x = fct_infreq(categoria), fill = categoria)) +
geom_bar(show.legend = FALSE) +
labs(
title = "Contagem de Pontos Turísticos por Categoria",
x = "Categoria",
y = "Contagem"
) +
theme_minimal() +
theme(axis.text.x = element_text(angle = 45, hjust = 1))
ggsave("categoria_barplot_R.png", plot = bar_cat, width = 10, height = 6)
hist_ava <- ggplot(df, aes(x = avaliacao)) +
geom_histogram(aes(y = ..density..), bins = 10, fill = "blue", alpha = 0.7) +
geom_density(color = "blue", linewidth = 1) +
labs(
title = "Distribuição das Avaliações",
x = "Avaliação (Nota)",
y = "Densidade"
) +
theme_minimal()
ggsave("avaliacao_histogram.png", plot = hist_ava, width = 10, height = 6)
hist_ava <- ggplot(data_clean, aes(x = avaliacao)) +
geom_histogram(aes(y = ..density..), bins = 10, fill = "blue", alpha = 0.7) +
geom_density(color = "blue", linewidth = 1) +
labs(
title = "Distribuição das Avaliações",
x = "Avaliação (Nota)",
y = "Densidade"
) +
theme_minimal()
ggsave("avaliacao_histogram.png", plot = hist_ava, width = 10, height = 6)
